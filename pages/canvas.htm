<!doctype html>
<html lang="en">
<head>
	<title>asdf</title>
	<link rel="stylesheet" type="text/css" href="/default.css">
	<link rel="stylesheet" type="text/css" href="/light.css">
	<meta charset="uTf-8" />
	<style>
		html, body {
			width: 100%;
			height: 100%;
			margin: 0px;
			border: 0;
			overflow: hidden;
			display: block;
		}
	</style>
</head>
<body>
	<script type="text/javascript">
		var can = document.createElement("canvas");
		can.id = "canvas";
		can.style = "width:100%; height:100%";
		document.body.appendChild(can);
		var ctx = can.getContext("2d");
		var mouseX = 0;
		var mouseY = 0;
		
		var titlePadding = 4; //4
		var titleHeight = 32; //18
		
		var windowSwood = {
			width: 250,
			height: 150,
			icon: "/res/jon.jpg",
			title: "Swood Grommets",
			xPos: 300,
			yPos: 200
		};
		
		var windowBack = {
			width: 600,
			height: 400,
			icon: "/res/crouton.gif",
			title: "crouton",
			xPos: 100,
			yPos: 50
		};
		
		initialize();
		document.addEventListener("mousemove", updateMousePos, false);
		
		function updateMousePos(mouse) {
			mouseX = mouse.clientX;
			mouseY = mouse.clientY;
		}
		 
		function initialize() {
			window.addEventListener("resize", resizeCanvas, false);
			resizeCanvas();
		}
		
		function resizeCanvas() {
			can.width = window.innerWidth;
			can.height = window.innerHeight;
			redraw();
		}
		
		function redraw() {
			ctx.textBaseline = "top";
			
			// Teal BG
			ctx.fillStyle = "#088";
			ctx.fillRect(0, 0, can.width, can.height);
			
			drawWindow(windowBack, windowSwood)
		}
		
		function drawWindow() {
			for (var i=0; i<arguments.length; i++) {
				// Window
				ctx.fillStyle = "#AAA";
				ctx.fillRect(arguments[i].xPos, arguments[i].yPos, arguments[i].width, arguments[i].height);
				ctx.fillStyle = "#EEE";
				ctx.fillRect(arguments[i].xPos, arguments[i].yPos, arguments[i].width - 3, arguments[i].height - 3);
				ctx.fillStyle = "#CCC";
				ctx.fillRect(arguments[i].xPos + 3, arguments[i].yPos + 3, arguments[i].width - 6, arguments[i].height - 6);
				
				// Title bar
				var titleBarGradient = ctx.createLinearGradient(arguments[i].xPos + titlePadding, 0, arguments[i].xPos + arguments[i].width - titlePadding * 2 + 1, 0);
				titleBarGradient.addColorStop(0, "#008");
				titleBarGradient.addColorStop(1, "#09D");
				ctx.fillStyle = titleBarGradient;
				ctx.fillRect(arguments[i].xPos + titlePadding, arguments[i].yPos + titlePadding, arguments[i].width - titlePadding * 2 + 1, titleHeight);
				
				// Window icon
				var windowIcon = new Image();
				windowIcon.onload = function() {
					ctx.drawImage(windowIcon, arguments[i].xPos + titlePadding + 2, arguments[i].yPos + titlePadding + 1, titleHeight - 2, titleHeight - 2);
				};
				windowIcon.src = arguments[i].icon;
				
				// Window Title and such
				ctx.fillStyle = "#fff";
				ctx.font = "bold " + titleHeight/2 +"px Verdana";
				ctx.fillText(arguments[i].title, arguments[i].xPos + titlePadding + titleHeight + 3, arguments[i].yPos + titlePadding + titleHeight / 4);
				ctx.fillText("×", arguments[i].xPos + arguments[i].width - titleHeight / 2 - titlePadding - 2, arguments[i].yPos + titlePadding + titleHeight / 4);
			}
		}
		
		/*
		can.onmousedown = function() {
			fWin.xPos = mouseX - fWin.width/2;
			fWin.yPos = mouseY - titleHeight/2 - titlePadding;
			redraw();
		}
		*/
	</script>
</body>
</html>
