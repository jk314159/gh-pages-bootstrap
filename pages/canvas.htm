<!doctype html>
<html lang="en">
<head>
	<title>asdf</title>
	<link rel="stylesheet" type="text/css" href="/default.css">
	<link rel="stylesheet" type="text/css" href="/light.css">
	<meta charset="uTf-8" />
	<style>
		html, body {
			width: 100%;
			height: 100%;
			margin: 0px;
			border: 0;
			overflow: hidden;
			display: block;
		}
	</style>
</head>
<body>
	<script>
		var can = document.createElement("canvas");
		can.id = "canvas";
		can.style = "width:100%; height:100%";
		document.body.appendChild(can);
		var ctx = can.getContext("2d");
		var mouseX = 0;
		var mouseY = 0;
		
		var titlePadding = 4; //4
		var titleHeight = 32; //18
		
		var fWin = {
			width:250,
			height:150,
			icon:"/res/jon.jpg",
			title:"Swood Grommets",
			xPos:300,
			yPos:200
		};
		
		initialize();
		document.addEventListener("mousemove", updateMousePos, false);
		
		function updateMousePos(mouse) {
			mouseX = mouse.clientX;
			mouseY = mouse.clientY;
		}
		 
		function initialize() {
			window.addEventListener("resize", resizeCanvas, false);
			resizeCanvas();
		}
		
		function resizeCanvas() {
			can.width = window.innerWidth;
			can.height = window.innerHeight;
			redraw();
		}
		
		function redraw() {
			ctx.textBaseline = "top";
			
			// Teal BG
			ctx.fillStyle = "#088";
			ctx.fillRect(0, 0, can.width, can.height);
			
			// Fake icons
			var fakeIcons = new Image();
			fakeIcons.onload = function() {
				ctx.drawImage(fakeIcons, 10, 10, 140, 548);
			};
			fakeIcons.src = "/res/icons.png";
			
			// Window
			ctx.fillStyle = "#CCC";
			ctx.fillRect(fWin.xPos, fWin.yPos, fWin.width, fWin.height);
			
			// Title bar
			var titleBarGradient = ctx.createLinearGradient(fWin.xPos+titlePadding, 0, fWin.xPos+fWin.width-titlePadding*2, 0);
			titleBarGradient.addColorStop(0, "#008");
			titleBarGradient.addColorStop(1, "#09D");
			ctx.fillStyle = titleBarGradient;
			ctx.fillRect(fWin.xPos+titlePadding, fWin.yPos+titlePadding, fWin.width-titlePadding*2, titleHeight);
			
			// Window icon
			var windowIcon = new Image();
			windowIcon.onload = function() {
				ctx.drawImage(windowIcon, fWin.xPos+titlePadding+2, fWin.yPos+titlePadding+1, titleHeight-2, titleHeight-2);
			};
			windowIcon.src = fWin.icon;
			var swood = new Image();
			swood.onload = function() {
				ctx.drawImage(swood, fWin.xPos+titlePadding+4, fWin.yPos+titleHeight+titlePadding+4, 208, 84);
			};
			swood.src = "/res/swood.png";
			
			// Window Title and such
			ctx.fillStyle = "#fff";
			ctx.font = "bold " + titleHeight/2 +"px Verdana";
			ctx.fillText(fWin.title, fWin.xPos+titlePadding+titleHeight+3, fWin.yPos+titlePadding+titleHeight/4);
			ctx.fillText("×", fWin.xPos+fWin.width-titleHeight/2-titlePadding-2, fWin.yPos+titlePadding+titleHeight/4);
		}
		
		can.onmousedown = function(){
			fWin.xPos = mouseX - fWin.width/2;
			fWin.yPos = mouseY - titleHeight/2 - titlePadding;
			redraw();
		}
	</script>
</body>
</html>
